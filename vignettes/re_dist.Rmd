---
title: "re_dist"
author: "Andre Gala-Garza"
date: "2025-11-14"
output: rmarkdown::html_vignette
description: >
  This is a tutorial on how to use re_dist(), a reimplementation of the dist() function from base R.
vignette: >
  %\VignetteIndexEntry{re_dist}
  %\VignetteEngine{knitr::rmarkdown}
  \usepackage[utf8]{inputenc}
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

This vignette shows the various usages for the re_dist() function and compares them to the original implementation of dist() in base R.

## Setup

```{r}
library(reDist)
```

```{r}
compare_dist_calcs <- function(mat, method, diag = FALSE, upper = FALSE,
                               p = 2, display = FALSE) {
  dist_base <- stats::dist(mat, method, diag, upper, p)
  dist_reDist <- re_dist(mat, method, diag, upper, p)
  
  print(dist_base)
  print(dist_reDist)
  
  return(all.equal(as.matrix(dist_base), as.matrix(dist_reDist)))
}
```

re_dist() sets up a distance matrix that shows the distance between each pair of rows in a matrix. Here is a sample matrix that we will use to showcase re_dist():
```{r}
a <- c(1, 2, 3, 4)
b <- c(6, 7, 6, 1)
c <- c(1, 2, 2, 5)
d <- c(8, 9, 0, 1)

mat <- rbind(a, b, c, d)

mat
```

## Euclidean distance
The Euclidean distance is the square root of the sum of the squared differences between corresponding components of the two vectors.

```{r}
re_dist(mat, method = "euclidean")
```

```{r}
compare_dist_calcs(mat, "euclidean", display = TRUE)
```

## Maximum distance
The maximum distance is the largest absolute difference between any pair of corresponding components of the two vectors.

```{r}
re_dist(mat, method = "maximum")
```

```{r}
compare_dist_calcs(mat, "maximum", display = TRUE)
```

## Manhattan distance
The Manhattan distance is the sum of the absolute differences between corresponding components of the two vectors.

```{r}
re_dist(mat, method = "manhattan")
```

```{r}
compare_dist_calcs(mat, "manhattan", display = TRUE)
```

## Canberra distance
The Canberra distance is the sum over all components of |x_i - y_i| / (|x_i| + |y_i|), omitting any terms where both x_i and y_i are zero.

```{r}
re_dist(mat, method = "canberra")
```

```{r}
compare_dist_calcs(mat, "canberra", display = TRUE)
```

## Binary distance
The binary distance treats non-zero values as “1” and zeros as “0” and is the proportion of positions where exactly one vector is 1 among all positions where at least one vector is 1.

```{r}
re_dist(mat, method = "binary")
```

```{r}
compare_dist_calcs(mat, "binary", display = TRUE)
```

## Minkowski distance
The Minkowski distance is the p-th root of the sum of the p-th powers of the absolute differences between corresponding components of the two vectors. The value of p is 2 by default, but it can be changed to a custom value.

```{r}
re_dist(mat, method = "minkowski")
```

```{r}
compare_dist_calcs(mat, "minkowski", display = TRUE)
```

## Show diagonal of matrix
```{r}
stats::dist(mat, method = "euclidean", diag = TRUE)
re_dist(mat, method = "euclidean", diag = TRUE)
```

## Show upper triangular part of matrix
```{r}
stats::dist(mat, method = "euclidean", upper = TRUE)
re_dist(mat, method = "euclidean", upper = TRUE)
```

## Show entire matrix
```{r}
stats::dist(mat, method = "euclidean", diag = TRUE, upper = TRUE)
re_dist(mat, method = "euclidean", diag = TRUE, upper = TRUE)
```

## Benchmark test
```{r, fig.width = 8, fig.height = 4}
library(microbenchmark)
library(ggplot2)

bm_results <- microbenchmark(
  stats::dist(mat, method="euclidean"),
  re_dist(mat, method="euclidean"),
  times = 100
)

autoplot(bm_results)
```
